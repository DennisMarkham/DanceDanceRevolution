<html>
	<head>
		  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<style>
			.glyphicon
			{
				font-size: 72px;
			}

			#top, #center, #bottom
			{
				text-align: center;
			}

			#timerBox
			{
				border: 5px solid black;
				font-size: 200%;
			}

			#buttonNTimer
			{
				text-align: center;
			}
		</style>
	</head>
	<body>
	
<div id = "top"> <span class="glyphicon glyphicon-arrow-up" id = "ArrowUp"> </div>
<div id = "center"><span id = "ArrowLeft" class="glyphicon glyphicon-arrow-left">    <span id = "ArrowRight" class="glyphicon glyphicon-arrow-right"></div>
		
			<div id = "bottom"> <span id = "ArrowDown" class="glyphicon glyphicon-arrow-down"></div>
		<br>
		<br>
		<div id = "buttonNTimer"><button onClick = "start()">Go!</button> <span id = "timerBox">Timer Box</span></div>
		Score: <span id = "score"></span>
		<script>

			//current version seems to work...sort of, but finnick at best.

			var randomNumber = 0;
			var timerStart = 60;
			var score = 0;
			var myInterval;
				var directions = ["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"];

			function start(){
				document.getElementById("buttonNTimer").innerHTML = timerStart;

			myInterval = setInterval(everySecond, 1000);
		}

		

			function createNewRandom(oldRandom){
				newRandom = Math.floor(Math.random() * 4) + 1;
				if (newRandom != oldRandom)
				{
					randomNumber = newRandom;
				} 
				else
				{
					createNewRandom();
				}

				//This is supposed to ensure it doesn't chose the same number/arrow twice in a row.  Why is this not effective?  It just seems to do nothing.
			}

			function endGame(){
				clearInterval(myInterval);

				//despite this, can still add to score after game ends.  WTF!!!
				document.body.removeEventListener("onkeyup", readKey);
			}

			function everySecond(){
				timerStart --;

				//this if statement is supposed to stop the game when it gets to zero.
				//it just does not work.
				if (timerStart == 0)
				{
					endGame(); 

				}

				document.getElementById("buttonNTimer").innerHTML = timerStart;
				
				// randomNumber = Math.floor(Math.random() * 4) + 1; 
				createNewRandom(randomNumber);
				
				//turns the arrow selected by "randomNumber" red.
				document.getElementById(directions[randomNumber]).style.color = "red";
				
				//this ensures only one arrow is red at a time
				for (let i = 0; i < directions.length; i++) 
				{
  if (directions[i] != directions[randomNumber])
  {
  	document.getElementById(directions[i]).style.color = "black";
  }
 
}

				document.body.addEventListener("keyup", readKey);
				

			}

			function readKey(event){
				event.preventDefault();

				console.log(event.key);
				console.log(randomNumber);
				// //the first one works but randomNumber comes back undefined.  WTF!

				if(event.key == directions[randomNumber])
				{
					score++;
					document.getElementById("score").innerHTML = score;
				}

				document.body.removeEventListener("onkeyup", readKey);
			}
		</script>
	</body>
</html>